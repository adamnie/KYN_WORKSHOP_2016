<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>Warsztaty Koło</title>

		<meta name="description" content="Summary presentation from PyCon2015 PL conference for Ericpol">
		<meta name="author" content="Adam Niedziałkowski">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/black.css" id="theme">

		<!-- Code syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
				<section>
					<h2>Środowisko</h2>
					<p class="fragment">
						Java 1.7
					</p>
					<p class="fragment">
						Android Studio
					</p>
					<p class="fragment">
						Sdk 23.2
					</p>
					<p class="fragment">
						Estimote Sdk
					</p>
					<p class="fragment">
						Telefon + BLE + Android 5.1
					</p>
					<p class="fragment">
						Estimote Stickers
					</p>

				</section>

				<section>
					<h2 class="fragment">Jak zimne jest twoje... </h2>
					<h2 class="fragment">... piwo?</h2>
				</section>

				<section>
					<img src="img/Motywacja.png" width="500" height="400"alt=""  />
				</section>

				<section>
					<h2>Agenda</h2>
					<ol>
						<li class="fragment">Co będziemy budować</li>
						<li class="fragment">Wstęp do Internet of things</li>
						<li class="fragment">Srodowisko</li>
						<li class="fragment">Zbudujmy to!</li>
					</ol>
				</section>

				<section>
					<section>
							<h2>Co będziemy budować?</h2>
					</section>
					<section>
						<img src="img/screen1.png" width="350" height="600" alt="" />
					</section>
					<section>
						<img src="img/screen2.png" width="350" height="600" alt="" />
					</section>
					<section>
						<img src="img/screen3.png" width="350" height="600" alt="" />
					</section>

				</section>

				<section>
					<section>
							<h2>Internet of Things </h2>
					</section>
					<!-- IoT definition -->
					<section>
						<h3>Internet of Things ...</h3>
						<p class="fragment">... is a network of interconnected <em>things</em> ...</p>
						<p class="fragment">... embedded with electronics and sensors ...</p>
						<p class="fragment">... which enables them to achieve greater value and service ...</p>
						<p class="fragment">... by exchanging and analysing data.</p>
					</section>


					<!-- Examples -->
					<section data-markdown>
						## "Rzeczy"
						![thing](img/thing1.png)
						![thing](img/thing2.png)
						![thing](img/thing3.png)
						![thing](img/thing4.png)
						![thing](img/thing5.png)
						![thing](img/thing6.png)
					</section>

					<!-- First appliance -->
					<section>
						<h3>Pierwsze zastosowanie</h3>
						<img src="img/coke.png" alt="" />
					</section>


					<section>
						<h2>Beacon'y</h2>
						<p class="fragment">Dają kontekst</p>
						<p class="fragment">Mają wbudowane sensory</p>
						<p class="fragment">Komunikacja jednokierunkowa</p>
						<p class="fragment">Korzystają z BlueTooth LowEnergy</p>
					</section>

					<section data-background="img/nearable_back.png">

					</section>

					<section>
						<h2>Estimote stickers</h2>
						<p class="fragment">
							zasięg do ~7m
						</p>
						<p class="fragment">
							Wodoodporne
						</p>
						<p class="fragment">
							żyją około rok
						</p>
					</section>


					<section>
						Protokoły
						<p class="fragment">
							iBeacon
							<ul>
								<li class="fragment">Monitorowanie</li>
								<li class="fragment">Określanie odległości</li>
								<li class="fragment">UUID, major, minor</li>
							</ul>
						</p>
						<p class="fragment">
							Eddystone
							<ul>
								<li class="fragment">Status beacona</li>
							</ul>
						</p>
					</section>

					<section>
						<h2>Nearable Protocol</h2>
						<p class="fragment">typ</p>
						<p class="fragment">id</p>
						<p class="fragment">pozycja w przestrzeni</p>
						<p class="fragment">ruch w osiach X, Y, Z</p>
						<p class="fragment">temperature</p>
						<p class="fragment">moc sygnału</p>
						<p class="fragment">poziom baterii</p>
						<p class="fragment">firmware</p>
					</section>
					<section>
						<h2>Aplikacja Estimote</h2>
						<img src="img/sample-1.png" height="600"alt="" />
					</section>

					<section>
						<h2>Estimote Cloud</h2>
					</section>

				</section>

				<section>
					<section>
						<h2>Android</h2>
					</section>

					<section>
						<h3>Activity</h3>
							<pre><code class="language-java">
public class MainActivity extends Activity {

		@Override
		protected void onCreate(Bundle savedInstanceState) {
				super.onCreate(savedInstanceState);
				setContentView(R.layout.activity_main);
		}

}							</code></pre>
						</p>
					</section>
					<section>
						<img src="img/android-flow.png" class="stretch"></img>
					</section>

					<section>
						<h3>Fragment</h3>
							<p class="fragment"><pre><code class="language-java">
public class BeaconListFragment extends Fragment {
    public BeaconListFragment() {
        // Required empty public constructor
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
                             Bundle savedInstanceState) {
        // Inflate the layout for this fragment
        return inflater.inflate(R.layout.fragment_beacon_list, container, false);
    }
}
							</code></pre></p>

							</section>
							<section>
							<h3>Application</h3>
							<p ><pre><code class="language-java">
public class ApplicationKYN2016 extends Application {

    @Override
    public void onCreate() {
        super.onCreate();
    }
							</code></pre></p>
					</section>
					<section>
						<h3>Logger</h3>
						<p class="fragment"><em>debug (Log.d)</em></p>
						<p class="fragment">info (Log.i)</p>
						<p class="fragment">error (Log.e)</p>
						<p class="fragment">verbose (Log.v)</p>
						<p class="fragment">warn (Log.w)</p>
					</section>
					<section data-markdown>
						## Android studio
					</section>
					<section>
						<h2>Struktura projektu</h2>
						<img src="img/android-1.png"></img>
					</section>
					<section>
						<h3>Gradle</h3>
						<pre><code class="language-java">
android {
    compileSdkVersion 23
    buildToolsVersion "23.0.3"

    defaultConfig {
        applicationId "com.example.adam.kyn_workshop_2016"
        minSdkVersion 21
        targetSdkVersion 23
        versionCode 1
        versionName "1.0"
    }
	....		</code></pre>
					</section>
					<section>
						<pre><code class="language-java">
dependencies {
    compile fileTree(dir: 'libs', include: ['*.jar'])
    testCompile 'junit:junit:4.12'
    compile 'com.android.support:appcompat-v7:23.2.1'
    compile 'com.android.support:design:23.2.1'
    compile 'com.estimote:sdk:0.9.4@aar'
}	</code></pre>
					</section>
					<section>
						<h3>Android Manifest</h3>
						<pre><code class="language-java">

&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;manifest xmlns:android="http://schemas.android.com/apk/res/android"
		package="com.workshops.helloworld" &gt;
		&lt;uses-permission
			 android:name="android.permission.SOME_PERMISSION" /&gt;

		&lt;application
				android:allowBackup="true"
				android:icon="@mipmap/ic_launcher"
				android:labelw="@string/app_name"
				android:theme="@style/AppTheme" &gt;
				&lt;activity
						android:name=".MainActivity"
						android:label="@string/app_name" &gt;
						&lt;intent-filter&gt;
								&lt;action android:name="android.intent.action.MAIN" /&gt;
								&lt;category android:name="android.intent.category.LAUNCHER" /&gt;
						&lt;/intent-filter&gt;
				&lt;/activity&gt;
		&lt;/application&gt;

&lt;/manifest&gt;
					</code></pre>
					</section>

					<section data-markdown>
						##Resources

						* Drawable <!-- .element: class="fragment" -->
						* Layout <!-- .element: class="fragment" -->
						* Values <!-- .element: class="fragment" -->
							* Styles <!-- .element: class="fragment" -->
							* Strings <!-- .element: class="fragment" -->
							* Colors <!-- .element: class="fragment" -->
							* Dimens <!-- .element: class="fragment" -->

					</section>
				</section>

				<section>
					<section>
						<h3>Budujmy!</h3>
					</section>
					<section>
						<h2>Nowy projekt</h2>
					</section>
					<section>
						<h2>Stworzyć obiekt Application</h2>
					</section>

					<section>
						<h3>Wpis w android manifest</h3>
						<pre><code class="language-java">
android:name=".ApplicationKYN2016"
						</code></pre>
					</section>

					<section>
						<h3>Znajdowanie beaconoów</h3>
					<pre><code class="language-java">
public void startRanging(){
	mBeaconManager.connect(new BeaconManager.ServiceReadyCallback() {
		@Override
		public void onServiceReady() {
				mBeaconManager.startNearableDiscovery();
		}
	});
}

public void stopRanging(){
	mBeaconManager.disconnect();
}
						</code></pre>
					</section>

						<section>
							<h2>Wykrywanie beaconów</h2>
							<pre><code class="language-java">
mBeaconManager.setNearableListener(new BeaconManager.NearableListener() {
	@Override
	public void onNearablesDiscovered(List&lt;Nearable&gt;nearables) {
		for(Nearable nearable: nearables) {
			Log.d("beacon", nearable.identifier);
		}
	}
});</code></pre>
						</section>

						<section>
							<h2>Rozpocząć skanowanie!</h2>
							<pre><code class="language-java">
@Override
protected void onStart() {
	super.onStart();
	mApplication.startRanging();
}

@Override
protected void onDestroy() {
	super.onDestroy();
	mApplication.stopRanging();
}
							</code></pre>
						</section>

						<section>
							<h3>Tak, ten błąd był oczekiwany</h3>
						</section>

						<section>
							Permisions
							<pre><code class="language-java">
&lt;uses-permission android:name="android.permission.BLUETOOTH_ADMIN" /&gt;
&lt;uses-permission android:name="android.permission.INTERNET"  /&gt;
&lt;uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /&gt;
&lt;uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" /&gt;
							</code></pre>
						</section>


					<section>
						Skopiuj z paczki plików plik <em>BeaconItem.java</em></br>
						Wygląda on tak:
						<pre><code class="language-java">public class BeaconItem {
    private String name;
    private String id;
    private static Map&lt;String, String&gt; beaconMap;

    static {
        beaconMap = new HashMap<>();
        beaconMap.put("33927f15e3b75104", "fridge");
        beaconMap.put("66fc8e73f145e172", "door");
        beaconMap.put("0929888a57bf4fb7", "bag");
        beaconMap.put("3f2ac3b188b1adfc", "bike");
        beaconMap.put("0a296db82040d52d", "chair");
        beaconMap.put("bbe08f1308d5093f", "car");
        beaconMap.put("84b70d36fd22d5a6", "generic");
        beaconMap.put("5085ab2174e6ffff", "bed");
        beaconMap.put("bb6820d988547674", "dog");
        beaconMap.put("389a2f206e537f96", "shoe");
    }
}					</code></pre>
					</section>
				<section>
						<pre><code class="language-java">private BeaconItem(String name, String id){
        this.name = name;
        this.id = id;
    }

public static ArrayList&lt;BeaconItem&gt; fromList(List&lt;String&gt; idList){
    ArrayList&lt;BeaconItem&gt; beaconList = new ArrayList&lt;&gt;();
    for (String id : idList){
        beaconList.add(new BeaconItem(beaconMap.get(id), id));
    }

    return beaconList;
}
public String getName() {
    return name;
}

public String getId() {
    return id;
}</code></pre>					
    				</section>
    				<section>
    				Skopiuj layout <em>item.xml</em> z paczki plików do katalogu <em>layout</em> 
						<pre><code class="language-java">&lt;ImageView android:id="@+id/icon"
    android:layout_width="75dp"
    android:layout_height="75dp"/&gt;

&lt;TextView android:id="@+id/name"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginStart="15dp"
    android:layout_gravity="center_vertical"
    android:fontFamily="sans-serif-thin"
    android:textSize="24sp"/&gt;</code></pre>					
    				</section>
    				<section>
    				Stwórz nową klasę: <em>BeaconArrayAdapter</em> i zaimplementuj konstruktor oraz pole <em>Context</em>
						<pre><code class="language-java">public class BeaconArrayAdapter extends ArrayAdapter&lt;BeaconItem&gt;{
    private Context mContext;

    public BeaconArrayAdapter(Context context, ArrayList&lt;BeaconItem&gt; beacons) {
        super(context, 0, beacons);
        this.mContext = context;
    }
}</code></pre>
    				</section>
    				<section>
    				Nadpisz wymaganą metodę <em>getView()</em>
						<pre><code class="language-java">@Override
public View getView(int position, View convertView, ViewGroup parent) {
    BeaconItem item = getItem(position);

    if (convertView == null) {
        convertView = LayoutInflater.from(getContext())
        	.inflate(R.layout.item, parent, false);
    }

    ImageView icon = (ImageView) convertView.findViewById(R.id.icon);
    TextView name = (TextView) convertView.findViewById(R.id.name);

    Resources resources = mContext.getResources();
    final int resourceId = resources.getIdentifier(item.getName(),
    	"drawable", mContext.getPackageName());
</code></pre>
    				</section>
    				<section>
						<pre><code class="language-java">
    icon.setImageResource(resourceId);
    name.setText(item.getName());

    return convertView;
}</code></pre>
    				</section>
    				<section>
						<h2>Skopiuj wszystkie pliki <em>.png</em> do katalogu Drawables (prawdopodobnie trzeba go utworzyć w katalogu <em>res</em>)</h2>
					</section>
    				<section>
    				Stwórz nowy Blank Fragment - <em>BeaconListFragment</em>
						<pre><code class="language-java">public class BeaconListFragment extends Fragment {
    public BeaconListFragment() {
        // Required empty public constructor
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
                             Bundle savedInstanceState) {
        // Inflate the layout for this fragment
        View view = inflater.inflate(R.layout.fragment_beacon_list, container,
        	false);

        return view;
    }
}
</code></pre>
    				</section>
						<section>
    				Dodanie fragmentu w main activity
						<pre><code class="language-java">if (savedInstanceState == null) {
  getFragmentManager().beginTransaction()
    .add(R.id.main_fragment, new BeaconListFragment(), "BeaconListFragment").commit();
}
</code></pre>
    				</section>
						<section>
    				Dodanie <em>Frame Layout</em> w <em>content_main.xml</em>
						<pre><code class="language-java">&lt;FrameLayout android:id="@+id/main_fragment"
  	android:layout_width="fill_parent"
  	android:layout_height="fill_parent"&gt;
&lt;/FrameLayout&gt;
</code></pre>
    				</section>
    				<section>
    				Dodaj <em>ListView</em> w pliku <em>fragment_beacon_list.xml</em>
						<pre><code class="language-java">&lt;ListView android:id="@+id/beacon_list"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" /&gt;
</code></pre>
    				</section>

    				<section>
    				Dodaj pola do klasy
						<pre><code class="language-java">private ListView mBeaconList;
private ApplicationKYN2016 mApplication;
private Handler mHandler;
private List&lt;String&gt; mDataset;
private ProgressDialog mProgress;

private static final Integer UPDATE_LIST_INTERVAL = 4 * 1000;
</code></pre>
    				</section>
    				<section>
    				Zainicjalizuj dodane pola oraz wyświetl okienko ładowania
						<pre><code class="language-java">mApplication = (ApplicationKYN2016) getActivity().getApplication();
mBeaconList = (ListView) view.findViewById(R.id.beacon_list);
mDataset = new ArrayList<>();
mHandler = new Handler();

mProgress = ProgressDialog.show(getActivity(), "",
        "Skanowanie beaconów...", true);
</code></pre>
    				</section>
    				<section>
    				Stwórz <em>OnClickItemListener</em> dla listy
						<pre><code class="language-java">AdapterView.OnItemClickListener itemClickListener =
	new AdapterView.OnItemClickListener() {
    @Override
    public void onItemClick(AdapterView&lt;?&gt; parent, View view, int position,
    	long id) {

    }
};

mBeaconList.setOnItemClickListener(itemClickListener);
</code></pre>
    				</section>
    				<section>
    				W środku metody <em>onItemClick()</em> wyświetl komunikat o id wybranego beacona
						<pre><code class="language-java">@Override
public void onItemClick(AdapterView&lt;?&gt; parent, View view, int position,
	long id) {
	BeaconItem beacon = (BeaconItem)parent.getItemAtPosition(position);
	Toast toast = Toast.makeText(getActivity(), beacon.getId(),
		Toast.LENGTH_LONG);
	toast.show();
}
</code></pre>
    				</section>
							<section>

							<h2>Odświeżanie listy</h2>
							<pre><code class="language-java">
private void updateAvailableBeacons(){
	Set&lt;Nearable&gt; nearables = mApplication.getTemperatureMap().keySet();
	for(Nearable nearable: nearables) {
		if(!mDataset.contains(nearable.identifier)) {
			if (mProgress.isShowing())
				mProgress.dismiss();
			mDataset.add(nearable.identifier);
		}
	}

	BeaconArrayAdapter beaconAdapter = new BeaconArrayAdapter(getActivity(), BeaconItem.fromList(mDataset));
	mBeaconList.setAdapter(beaconAdapter);

	beaconAdapter.notifyDataSetChanged();
}
							</code></pre>
						</section>

						<section>
							<h2>Runnable</h2>
							<pre><code class="language-java">
final Runnable updateBeaconList = new Runnable() {
	@Override
	public void run() {
		try {
		updateAvailableBeacons();
		} finally {
		mHandler.postDelayed(updateBeaconList, UPDATE_LIST_INTERVAL);
		}
	}
};
							</code></pre>
						</section>

					<section>
						<h2>Włączcie aplikację i sprawdźcie czy pojawiają się beacony.</h2>
					</section>
					<section>
						<h2>Runnable</h2>
						<pre><code class="language-java">
final Runnable updateBeaconList = new Runnable() {
@Override
public void run() {
	try {
	updateAvailableBeacons();
	} finally {
	mHandler.postDelayed(updateBeaconList, UPDATE_LIST_INTERVAL);
	}
}
};
						</code></pre>
					</section>
					<section>
						Skopiuj z paczki plików plik <em>strings.xml</em> do katalogu values</br>
						<pre><code class="language-java">public class BeaconItem {
    public static Map&lt;String, Integer[]&gt; beerMap;

    static {
        beerMap = new HashMap<>();
        beerMap.put("saison", new Integer[]{12,14});
        beerMap.put("apa", new Integer[]{9,11});
        beerMap.put("biale", new Integer[]{4,6});
        beerMap.put("marcowe", new Integer[]{6,8});
        beerMap.put("bock", new Integer[]{9,11});
        beerMap.put("porter", new Integer[]{8,12});
    }
}	</code></pre>
					</section>
					<section>
						Skopiuj z paczki plików plik <em>BeerItem.java</em></br>
							Wygląda on tak:
						<pre><code class="language-java">&lt;string-array name="beer_list"&gt;
    &lt;item&gt;Saison&lt;/item&gt;
    &lt;item&gt;APA&lt;/item&gt;
    &lt;item&gt;Biale&lt;/item&gt;
    &lt;item&gt;Marcowe&lt;/item&gt;
    &lt;item&gt;Bock&lt;/item&gt;
    &lt;item&gt;Porter&lt;/item&gt;
&lt;/string-array&gt;	</code></pre>
					</section>

    				<section>
    					Layout dla elementu beer będzie taki sam jak dla elementu beacon (<em>item.xml</em>)				
    				</section>
    				<section>
						Zrób kopię napisanego <u>BeaconArrayAdapter</u> z nazwą <u>BeerArrayAdapter</u> a następnie każde
						wystąpienie <u>BeaconItem</u> zamień na <u>String</u> </br>
						oraz </br><u>BeaconArrayAdapter</u> na <u>BeerArrayAdapter</u>
					</section>
					<section>
						Zamień następujące linijki
						<pre><code class="language-java">final int resourceId = resources.getIdentifier(<u>item.toLowerCase()</u>, 
	"drawable", mContext.getPackageName());

name.setText(<u>item</u>);	</code></pre>
					</section>
					<section>
    				Stwórz nowy Blank Fragment - <em>BeerListFragment</em>
						<pre><code class="language-java">public class BeerListFragment extends Fragment {
    public BeerListFragment() {
        // Required empty public constructor
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
                             Bundle savedInstanceState) {
        // Inflate the layout for this fragment
        View view = inflater.inflate(R.layout.fragment_beer_list, container,
        	false);

        return view;
    }
}
</code></pre>
    				</section>
    				<section>
    				Dodaj <em>ListView</em> w pliku <em>fragment_beer_list.xml</em>
						<pre><code class="language-java">&lt;ListView android:id="@+id/beer_list"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" /&gt;
</code></pre>
    				</section>
    				<section>
    				W metodzie <em>onItemClick</em> w pliku <em>BeaconListFragment</em> dodaj podmianę fragmentu
    				oraz ustaw argumenty
						<pre><code class="language-java">@Override
public void onItemClick(AdapterView&lt;?&gt; parent, View view, int position, long id) {
    BeaconItem beacon = (BeaconItem) parent.getItemAtPosition(position);

    Bundle bundle = new Bundle();
    bundle.putString("beaconId", beacon.getId());
    Fragment fragment = new BeerListFragment();
    fragment.setArguments(bundle);

    getActivity().getFragmentManager().beginTransaction()
            .replace(R.id.main_fragment, fragment, "BeerListFragment")
            .addToBackStack("BeerListFragment").commit();

}
</code></pre>
    				</section>
    				<section>
    				W pliku <em>BeerListFragment</em> stwórz pole beaconId, zainicjalizuj ListView oraz odbierz dane
    				przesłane przez poprzedni fragment
						<pre><code class="language-java">private String beaconId;

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
                         Bundle savedInstanceState) {
    // Inflate the layout for this fragment
    View view = inflater.inflate(R.layout.fragment_beer_list, container, false);

    ListView beerList = (ListView) view.findViewById(R.id.beer_list);

    Bundle bundle = this.getArguments();
    if (bundle != null) {
        beaconId = bundle.getString("beaconId", "");
    }
</code></pre>
    				</section>
    				<section>
    				Stwórz <em>OnItemClickListener</em>, pobierz listę piw z pliku <em>strings.xml</em> oraz
    				ustaw <em>BeerArrayAdapter</em> na ListView
						<pre><code class="language-java">AdapterView.OnItemClickListener itemClickListener = new AdapterView.OnItemClickListener() {
    @Override
    public void onItemClick(AdapterView&lt;?&gt; parent, View view, int position, long id) {

    }
};

beerList.setOnItemClickListener(itemClickListener);

String[] list = getResources().getStringArray(R.array.beer_list);

BeerArrayAdapter beerAdapter = new BeerArrayAdapter(getActivity(), 
	new ArrayList<>(Arrays.asList(list)));
beerList.setAdapter(beerAdapter);
</code></pre>
    				</section>
    				<section>
    				W metodzie <em>onItemClick</em> dodaj podmianę fragmentu
    				oraz ustaw argumenty
						<pre><code class="language-java">@Override
public void onItemClick(AdapterView&lt;?&gt; parent, View view, int position, long id) {
    String beer = (String) parent.getItemAtPosition(position);

    Bundle bundle = new Bundle();
    bundle.putString("beaconId", beaconId);
    bundle.putString("beer", beer.toLowerCase());

    Fragment fragment = new TemperatureFragment();
    fragment.setArguments(bundle);

    getActivity().getFragmentManager().beginTransaction()
            .replace(R.id.main_fragment, fragment, "TemperatureFragment")
            .addToBackStack("TemperatureFragment").commit();

}
</code></pre>
    				</section>
    				<section>
						<h2>Włączcie aplikację i wybierzcie jednego z beaconów. Powinna pojawić się lista piw 
						(przy kliknięciu aplikacja zgłosi błąd bo jeszcze nie utworzyliśmy ostatniego fragmentu)</h2>
					</section>
					<section>
    				Stwórz nowy Blank Fragment - <em>TemperatureFragment</em>
						<pre><code class="language-java">public class TemperatureFragment extends Fragment {
    public TemperatureFragment() {
        // Required empty public constructor
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
                             Bundle savedInstanceState) {
        // Inflate the layout for this fragment
        View view = inflater.inflate(R.layout.fragment_temperature, container,
        	false);

        return view;
    }
}
</code></pre>
    				</section>
    				<section>
    				Skopiuj zawartość pliku <em>fragment_temperature.xml</em> z paczki plików do właśnie utworzonego pliku o tej samej nazwie
						<pre><code class="language-java">&lt;LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"&gt;

    &lt;ImageView android:id="@+id/beer_view"
        android:layout_width="100dp"
        android:layout_height="200dp"
        android:layout_gravity="center" /&gt;

    &lt;TextView android:id="@+id/optimal_temperature_view"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:fontFamily="sans-serif-thin"
        android:textSize="24sp"/&gt;

    &lt;TextView android:id="@+id/temperature_view"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:fontFamily="sans-serif-thin"
        android:textSize="24sp"/&gt;

    &lt;ImageView android:id="@+id/thermometer_view"
        android:layout_width="200dp"
        android:layout_height="100dp"
        android:layout_gravity="center"/&gt;

&lt;/LinearLayout&gt;
</code></pre>
    				</section>
    				<section>
    				Dodaj pola do fragmentu <em>TemperatureFragment</em>
						<pre><code class="language-java">private TextView mTemperatureView, mOptimalTemperatureView;
private ImageView mBeerView, mThermometerView;
private Handler mHandler;
private Nearable mCurrentNearable;
private ApplicationKYN2016 mApplication;
private Integer[] temperatureRange;
private static final Integer UPDATE_TEMPERATURE_INTERVAL = 1 * 1000;

private String beer;
</code></pre>
    				</section>
    				<section>
    				Zainicjalizuj dodane pola
						<pre><code class="language-java">mApplication = (ApplicationKYN2016) getActivity().getApplication();
mTemperatureView 	= (TextView) view.findViewById(R.id.temperature_view);
mOptimalTemperatureView = (TextView) view.findViewById(R.id.optimal_temperature_view);
mBeerView 		= (ImageView) view.findViewById(R.id.beer_view);
mThermometerView 	= (ImageView) view.findViewById(R.id.thermometer_view);
mHandler 		= new Handler();
</code></pre>
    				</section>
    				<section>
    				Odbierz dane z poprzedniego fragmentu
						<pre><code class="language-java">String beaconId = "";

Bundle bundle = this.getArguments();
if (bundle != null) {
    beaconId = bundle.getString("beaconId", "");
    beer = bundle.getString("beer", "");
}
</code></pre>
    				</section>
    				<section>
    				Wyświetlmy wybrane piwo
						<pre><code class="language-java">Resources resources = getActivity().getResources();
final int resourceId = resources.getIdentifier(beer.toLowerCase(), 
	"drawable", getActivity().getPackageName());
mBeerView.setImageResource(resourceId);
</code></pre>
    				</section>
    				<section>
    				Wyświetlmy optymalną temperaturę dla wybranego piwa
						<pre><code class="language-java">temperatureRange = BeerItem.beerMap.get(beer);
mOptimalTemperatureView.setText("Optymalna temperatura: " + 
	temperatureRange[0] + " - " + temperatureRange[1] +  " \u2103");
</code></pre>
    				</section>
    				<section>
    				Z listy beaconów wybierzmy tego, który ma odebrane id
						<pre><code class="language-java">Set&lt;Nearable&gt; nearables = mApplication.getTemperatureMap().keySet();
for (Nearable nearable : nearables){
    if (nearable.identifier.equals(beaconId)){
        mCurrentNearable = nearable;
    }
}
</code></pre>
    				</section>
    				<section>
    				!!! TU CZĘŚĆ ADAMA Z WYKRYWANIEM TEMPERATURY !!!
    				</section>





				</section>

			</div>
		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>

			// Full list of configuration options available at:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				transition: 'slide', // none/fade/slide/convex/concave/zoom

				// Optional reveal.js plugins
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, condition: function() { return !!document.querySelector( 'pre code' ); }, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true },
					{ src: 'plugin/notes/notes.js', async: true }
				]
			});

		</script>

	</body>
</html>
